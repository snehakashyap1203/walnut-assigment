var tape = require('tape');
var createPaths = require('./..');

var traverse = createPaths( [
  [ 'a', 'b', 1 ],
  [ 'a', 'b1', 2 ],
  [ 'a', 'b2', 3 ],
  [ 'a', 'b3', 3 ],
  [ 'a', 'short', 1 ],
  [ 'short', 'b', 0.5 ],
  [ 'b3', 'a', 3 ],
  [ 'b1', 'c', 1 ],
  [ 'b2', 'c', 1 ]
]);

tape('test same node', function(t) {

  var info = traverse('a', 'a');

  t.equal(info.duration, 0);
  t.deepEqual(info.path, ['a']);
  t.end();
});


tape('test regular path with multiple options', function(t) {

  var info = traverse('a', 'c');

  t.equal(info.duration, 3);
  t.deepEqual(info.path, [ 'a', 'b1', 'c' ]);
  t.end();
});

tape('test no path', function(t) {

  var info = traverse('c', 'a');

  t.equal(info, null);
  t.end();
});

tape('test inbetween states', function(t) {

  var info;

  info = traverse({ from: 'a', to: 'short', location: 0.25 }, 'b');
  t.equal(info.duration, 1.25);
  t.deepEqual(info.path, [ 'a', 'b' ]);


  info = traverse({ from: 'a', to: 'short', location: 0.75 }, 'b');
  t.equal(info.duration, 0.75);
  t.deepEqual(info.path, [ 'short', 'b' ]);

  t.end();
});